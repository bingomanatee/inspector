(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b():'function'==typeof define&&define.amd?define('inspector',[],b):'object'==typeof exports?exports.inspector=b():a.inspector=b()})('undefined'==typeof self?this:self,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=1)}([function(a){a.exports=require('is')},function(a,b,c){a.exports=c(2)},function(a,b,c){'use strict';Object.defineProperty(b,'__esModule',{value:!0});var d=c(0),e=c.n(d);var f=(a,b=!1,c=!1)=>{let d=a;if(e.a.string(d)&&(!c&&!b&&(c=`not an ${d}`),d=e.a[d]),!b&&!c)return d;const f=e.a.function(b)?b:()=>b,g=e.a.function(c)?c:()=>c;if(!e.a.function(d))throw console.log('bad rule ',d,a,b,c),new Error('bad rule');return(a)=>{const b=d(a);return b?f(a,b):g(a,b)}},g=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h['return']&&h['return']()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError('Invalid attempt to destructure non-iterable instance')}}(),h=(a,b=!1)=>{let c=a;if('function'==typeof a&&(c=[a]),!Array.isArray(c))throw new Error('collector must receive array');if(!c.length)return()=>!1;c=c.map((a)=>Array.isArray(a)?f(...a):e.a.string(a)?f(a):a);const d=(a)=>c.map((b)=>{try{return b(a)}catch(a){throw console.log('error in test ',b,a),a}});if(!b)return d;if(Array.isArray(b))return(a)=>{const c=d(a);var f=g(b,2);const h=f[0],i=f[1];return c.reduce(h,e.a.function(i)?i():i)};if('function'==typeof b)return(a)=>{const c=d(a);return c.reduce(b)};const h=(a)=>d(a).filter((b)=>!1!==b);return'and'===b?(a)=>c.reduce((b,c)=>{if(!b)return b;const d=c(a);return!1!==d&&[...b,d]},[]):'or'===b?(a)=>c.reduce((b,c)=>b?b:(e.a.function(c)||console.log('collector test is not a function: ',c),c(a)),!1):(a)=>{const b=h(a);return!!(0<b.length)&&b}};const i=Symbol('required is not set'),j=Symbol('variable is absent');var k=(a,b)=>{let c;if(Array.isArray(a))c=b?a.map((a)=>e.a.function(a)||e.a.string(a)?[a,!1,b]:a):a;else if(e.a.object(a)){if(!b)throw new Error('cannot take an object as a validator without an onFail');c=Object.keys(a).map((c)=>[a[c],!1,b])}else('function'==typeof a||e.a.string(a))&&(c=b?[[a,!1,b]]:[a]);return c},l=(a,b={})=>{var c=b.required;const d=c===void 0?i:c;var g=b.onFail;const l=k(a,g!==void 0&&g);if(!Array.isArray(l))throw console.log('tests not turned into an array:',a,l),new Error('cannot array-ify ',a);const m=l.map((a)=>Array.isArray(a)?f(...a):f(a));let n;if(!d)n=(a)=>h([f((b)=>b,j),h(m,'or')],'and')(a)[1]||!1;else if(d===i)n=h(m,'or');else{const a=e.a.string(d)?d:'required';m.unshift([(b)=>b,!1,a]),n=h(m,'or')}return(a)=>{let b=n(a);return b&&!Array.isArray(b)&&(b=[b]),b}};const m=(...a)=>Array.isArray(a[0])?a[0]:a,n=(...a)=>h(m(a),'and'),o=(...a)=>h(m(a),'or');c.d(b,'ifFn',function(){return f}),c.d(b,'validator',function(){return l}),c.d(b,'collector',function(){return h}),c.d(b,'andFn',function(){return n}),c.d(b,'orFn',function(){return o});b['default']=l}])});
//# sourceMappingURL=index.js.map